CREATE DATABASE DAN1_NUOCHOA;
GO

USE DAN1_NUOCHOA;
GO

CREATE TABLE THUONGHIEU
(
    IDTHUONGHIEU INT,
    TEN NVARCHAR(250),
	NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_THUONGHIEU PRIMARY KEY (IDTHUONGHIEU)
);
GO

CREATE TABLE XUATXU
(
    IDXUATXU INT,
    TENXUATXU NVARCHAR(250),
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_XUATXU PRIMARY KEY (IDXUATXU)
);
GO

CREATE TABLE NONGDO
(
    IDNONGDO INT,
    TENNONGDO NVARCHAR(250),
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_NONGDO PRIMARY KEY (IDNONGDO)
);
GO

CREATE TABLE NHOMHUONG
(
    IDNHOMHUONG INT,
    TENNHOMHUONG NVARCHAR(250),
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_NHOMHUONG PRIMARY KEY (IDNHOMHUONG)
);
GO

CREATE TABLE KHACHHANG
(
    IDKHACHHANG INT,
    TENKHACHHANG NVARCHAR(250),
    SODIENTHOAI VARCHAR(10),
    DIACHI NVARCHAR(250),
    EMAIL VARCHAR(250),
    NGAYSINH DATE,
    GIOITINH BIT,
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_KHACHHANG PRIMARY KEY (IDKHACHHANG)
);
GO

CREATE TABLE NHANVIEN
(
    IDNHANVIEN INT,
    TENNHANVIEN NVARCHAR(250),
    GIOITINH BIT,
    EMAIL VARCHAR(250),
    NGAYSINH DATE,
    DIACHI NVARCHAR(250),
    SODIENTHOAIN VARCHAR(10),
    TAIKHOAN VARCHAR(250),
    MATKHAU VARCHAR(250),
    CHUCVU BIT,
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_NHANVIEN PRIMARY KEY (IDNHANVIEN)
);
GO

CREATE TABLE SANPHAM
(
    IDSANPHAM INT,
    ID_THUONGHIEU INT,
    TENSANPHAM NVARCHAR(250),
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_SANPHAM PRIMARY KEY (IDSANPHAM),
    CONSTRAINT FK_SANPHAM_THUONGHIEU FOREIGN KEY (ID_THUONGHIEU) REFERENCES THUONGHIEU (IDTHUONGHIEU)
);
GO

CREATE TABLE SANPHAMCHITIET
(
    IDSANPHAMCHITIET INT,
    DOTOHUONG NVARCHAR(250),
    THOIGIANNENDUNG NVARCHAR(250),
    NAMPHATHANH DATE,
    DUNGTICH INT,
    GIOITINH BIT,
    LUUHUONG INT,
    ID_SP INT,
    ID_XUATXU INT,
    ID_NONGDO INT,
    ID_NHOMHUONG INT,
    CONSTRAINT FK_SPCT_SANPHAMCHITIET_SANPHAM FOREIGN KEY (ID_SP) REFERENCES SANPHAM (IDSANPHAM),
    CONSTRAINT FK_SPCT_SANPHAMCHITIET_XUATXU FOREIGN KEY (ID_XUATXU) REFERENCES XUATXU (IDXUATXU),
    CONSTRAINT FK_SPCT_SANPHAMCHITIET_NONGDO FOREIGN KEY (ID_NONGDO) REFERENCES NONGDO (IDNONGDO),
    CONSTRAINT FK_SPCT_SANPHAMCHITIET_NHOMHUONG FOREIGN KEY (ID_NHOMHUONG) REFERENCES NHOMHUONG (IDNHOMHUONG),
    CONSTRAINT PK_SPCT_SANPHAMCHITIET PRIMARY KEY (IDSANPHAMCHITIET)
);
GO

CREATE TABLE VOUCHER
(
    IDVOUCHER INT,
    MAVOUCHER VARCHAR(100),
    PHANCHAMGIAMGIA FLOAT,
    NGAYBATDAU DATE,
    NGAYKETTHUC DATE,
    NGAYTAO DATETIME ,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_VC_VOUCHER PRIMARY KEY (IDVOUCHER)
);
GO

CREATE TABLE PHUONGTHUCTHANHTOAN
(
    IDPHUONGTHUCTHANHTOAN INT,
    TENPHUONGTHUCTHANHTOAN NVARCHAR(250),
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_PTTT_PHUONGTHUCTHANHTOAN PRIMARY KEY (IDPHUONGTHUCTHANHTOAN)
);
GO

CREATE TABLE HOADON
(
    IDHOADON INT,
    ID_KHACHHANG INT,
    ID_NHANVIEN INT,
    ID_VOUCHER INT,
    ID_PHUONGTHUCTHANHTOAN INT,
    TONGTIEN FLOAT,
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_HOADON PRIMARY KEY (IDHOADON),
    CONSTRAINT FK_HOADON_KHACHHANG FOREIGN KEY (ID_KHACHHANG) REFERENCES KHACHHANG (IDKHACHHANG),
    CONSTRAINT FK_HOADON_NHANVIEN FOREIGN KEY (ID_NHANVIEN) REFERENCES NHANVIEN (IDNHANVIEN),
    CONSTRAINT FK_HOADON_VOUCHER FOREIGN KEY (ID_VOUCHER) REFERENCES VOUCHER (IDVOUCHER),
    CONSTRAINT FK_HOADON_PHUONGTHUCTHANHTOAN FOREIGN KEY (ID_PHUONGTHUCTHANHTOAN) REFERENCES PHUONGTHUCTHANHTOAN (IDPHUONGTHUCTHANHTOAN)
);
GO

CREATE TABLE HOADONCHITIET
(
    IDHOADONCHITIET INT,
    ID_HOADON INT,
    ID_SANPHAMCHITIET INT,
    TENSANPHAM NVARCHAR(250),
    GIABAN FLOAT,
    SOLUONG INT,
    TONGTIEN DECIMAL(10, 2),
    NGAYTAO DATETIME,
    NGAYSUA DATETIME,
    TRANGTHAI BIT,
    CONSTRAINT PK_HOADONCHITIET PRIMARY KEY (IDHOADONCHITIET),
    CONSTRAINT FK_HOADONCHITIET_HOADON FOREIGN KEY (ID_HOADON) REFERENCES HOADON (IDHOADON),
    CONSTRAINT FK_HOADONCHITIET_SANPHAMCHITIET FOREIGN KEY (ID_SANPHAMCHITIET) REFERENCES SANPHAMCHITIET (IDSANPHAMCHITIET)
);
GO
-- Insert data into THUONGHIEU table
INSERT INTO THUONGHIEU (IDTHUONGHIEU, TEN, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'Brand1', GETDATE(), GETDATE(), 1),
(2, 'Brand2', GETDATE(), GETDATE(), 1);

-- Insert data into XUATXU table
INSERT INTO XUATXU (IDXUATXU, TENXUATXU, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'Country1', GETDATE(), GETDATE(), 1),
(2, 'Country2', GETDATE(), GETDATE(), 1);

-- Insert data into NONGDO table
INSERT INTO NONGDO (IDNONGDO, TENNONGDO, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'Intensity1', GETDATE(), GETDATE(), 1),
(2, 'Intensity2', GETDATE(), GETDATE(), 1);

-- Insert data into NHOMHUONG table
INSERT INTO NHOMHUONG (IDNHOMHUONG, TENNHOMHUONG, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'Category1', GETDATE(), GETDATE(), 1),
(2, 'Category2', GETDATE(), GETDATE(), 1);

-- Insert data into KHACHHANG table
INSERT INTO KHACHHANG (IDKHACHHANG, TENKHACHHANG, SODIENTHOAI, DIACHI, EMAIL, NGAYSINH, GIOITINH, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'Customer1', '1234567890', 'Address1', 'customer1@email.com', '1990-01-01', 1, GETDATE(), GETDATE(), 1),
(2, 'Customer2', '0987654321', 'Address2', 'customer2@email.com', '1995-05-05', 0, GETDATE(), GETDATE(), 1);

-- Insert data into NHANVIEN table
INSERT INTO NHANVIEN (IDNHANVIEN, TENNHANVIEN, GIOITINH, EMAIL, NGAYSINH, DIACHI, SODIENTHOAIN, TAIKHOAN, MATKHAU, CHUCVU, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'Employee1', 1, 'employee1@email.com', '1985-03-15', 'EmployeeAddress1', '1234567890', 'employee1', 'password1', 1, GETDATE(), GETDATE(), 1),
(2, 'Employee2', 0, 'employee2@email.com', '1990-08-20', 'EmployeeAddress2', '0987654321', 'employee2', 'password2', 0, GETDATE(), GETDATE(), 1);

-- Insert data into SANPHAM table
INSERT INTO SANPHAM (IDSANPHAM, ID_THUONGHIEU, TENSANPHAM, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 1, 'Product1', GETDATE(), GETDATE(), 1),
(2, 2, 'Product2', GETDATE(), GETDATE(), 1);

-- Insert data into SANPHAMCHITIET table
INSERT INTO SANPHAMCHITIET (IDSANPHAMCHITIET, DOTOHUONG, THOIGIANNENDUNG, NAMPHATHANH, DUNGTICH, GIOITINH, LUUHUONG, ID_SP, ID_XUATXU, ID_NONGDO, ID_NHOMHUONG)
VALUES
(1, 'Fragrance1', '2024-01-01', '2023-01-01', 100, 1, 1, 1, 1, 1, 1),
(2, 'Fragrance2', '2024-02-01', '2023-02-01', 150, 0, 2, 2, 2, 2, 2);

-- Insert data into VOUCHER table
INSERT INTO VOUCHER (IDVOUCHER, MAVOUCHER, PHANCHAMGIAMGIA, NGAYBATDAU, NGAYKETTHUC, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'Voucher1', 0.1, '2024-01-01', '2024-02-01', GETDATE(), GETDATE(), 1),
(2, 'Voucher2', 0.2, '2024-02-01', '2024-03-01', GETDATE(), GETDATE(), 1);

-- Insert data into PHUONGTHUCTHANHTOAN table
INSERT INTO PHUONGTHUCTHANHTOAN (IDPHUONGTHUCTHANHTOAN, TENPHUONGTHUCTHANHTOAN, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 'PaymentMethod1', GETDATE(), GETDATE(), 1),
(2, 'PaymentMethod2', GETDATE(), GETDATE(), 1);

-- Insert data into HOADON table
INSERT INTO HOADON (IDHOADON, ID_KHACHHANG, ID_NHANVIEN, ID_VOUCHER, ID_PHUONGTHUCTHANHTOAN, TONGTIEN, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 1, 1, 1, 1, 500.00, GETDATE(), GETDATE(), 1),
(2, 2, 2, 2, 2, 800.00, GETDATE(), GETDATE(), 1);

-- Insert data into HOADONCHITIET table
INSERT INTO HOADONCHITIET (IDHOADONCHITIET, ID_HOADON, ID_SANPHAMCHITIET, TENSANPHAM, GIABAN, SOLUONG, TONGTIEN, NGAYTAO, NGAYSUA, TRANGTHAI)
VALUES
(1, 1, 1, 'Product1', 250.00, 2, 500.00, GETDATE(), GETDATE(), 1),
(2, 2, 2, 'Product2', 400.00, 2, 800.00, GETDATE(), GETDATE(), 1);



GO
SELECT * FROM KHACHHANG;
SELECT * FROM NHANVIEN;
SELECT * FROM SANPHAM;
SELECT * FROM THUONGHIEU;
SELECT * FROM SANPHAMCHITIET;
SELECT * FROM XUATXU;
SELECT * FROM NONGDO;
SELECT * FROM NHOMHUONG;
SELECT * FROM VOUCHER;
SELECT * FROM PHUONGTHUCTHANHTOAN;
SELECT * FROM HOADON;
SELECT * FROM HOADONCHITIET;